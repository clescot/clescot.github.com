<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 2 | Le blog de Charles Lescot.</title>
  <meta name="author" content="Charles Lescot">
  
  <meta name="description" content="Blog sur Java, le web, et les méthodes agiles.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Le blog de Charles Lescot."/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Le blog de Charles Lescot." type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Le blog de Charles Lescot.</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-10-11T01:44:00.000Z"><a href="/2013/10/11/2013-10-11-metrics-pour-mesurer-efficacement-les-performances-les-bases/">11/10/13</a></time>
      
      
  
    <h1 class="title"><a href="/2013/10/11/2013-10-11-metrics-pour-mesurer-efficacement-les-performances-les-bases/">Metrics, Pour Mesurer Efficacement Les Performances : Les Bases</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="presentation-de-Metrics"><a href="#presentation-de-Metrics" class="headerlink" title="présentation de Metrics"></a>présentation de Metrics</h1><p>Je vous propose dans cette série de 4 articles, de vous présenter la librairie <a href="https://github.com/codahale/metrics" target="_blank" rel="external">Metrics</a>,<br>initié par la société <a href="https://www.yammer.com/" target="_blank" rel="external">Yammer</a>.<br>Celle-ci permet de fournir des métriques au niveau applicatif et JVM.</p>
<p>Ce premier article, présente les différents types de mesures disponibles dans Metrics, leur usage et leur installation.</p>
<h1 id="pourquoi-mesurer"><a href="#pourquoi-mesurer" class="headerlink" title="pourquoi mesurer ?"></a>pourquoi mesurer ?</h1><p><a href="http://blog.octo.com/les-patterns-des-grands-du-web-lobsession-de-la-mesure/" target="_blank" rel="external">A l’instar des grands du web</a>, il devient primordial de mesurer les choses avant d’agir.<br>Cela permet de matérialiser, identifier et comprendre le fonctionnement interne en production de nos applications. Cela permet aussi de lever des freins techniques ou fonctionnels, notamment en comprenant la valeur métier de certaines fonctionnalités, les dysfonctionnements techniques ou le manque de performances. Pour cela, rien de tel qu’une mesure fiable, numérique, pour comprendre, et prendre des décisions. </p>
<p>La librairie Metrics, est une bonne solution pour répondre à ce besoin.</p>
<h2 id="installation-de-metrics"><a href="#installation-de-metrics" class="headerlink" title="installation de metrics"></a>installation de metrics</h2><p>Pour installer Metrics, il faut rajouter à son fichier maven <code>pom.xml</code>, la section suivante :</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.codahale.metrics<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>metrics-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="montee-de-version-renommage-de-package"><a href="#montee-de-version-renommage-de-package" class="headerlink" title="montée de version, renommage de package"></a>montée de version, renommage de package</h3><p>A noter qu’à partir de la version 3, Metrics a pour package de base <code>com.codahale.metrics</code>, et non <code>com.yammer.metrics</code> (cas des versions 2.x).</p>
<h2 id="Isolation-des-metriques-par-application"><a href="#Isolation-des-metriques-par-application" class="headerlink" title="Isolation des métriques par application"></a>Isolation des métriques par application</h2><p>Toutes les métriques de Metrics, sont stockées dans une instance de MetricsRegistry. Pour que plusieurs applications au sein de la même JVM, aient des métriques dissociées, il faut que chacune d’elles créent leur propre instance (chaque application étant isolée car possédant son propre classloader). Ceci peut soit se faire via le framework d’injection de dépendances (Spring, Guice), soit via un servletListener pour des applications JEE, ou via un champ statique public final de chaque application, accessible depuis l’extérieur de la classe.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> MetricRegistry metrics = <span class="keyword">new</span> MetricRegistry();</div></pre></td></tr></table></figure>
<h2 id="les-metriques-disponibles"><a href="#les-metriques-disponibles" class="headerlink" title="les métriques disponibles"></a>les métriques disponibles</h2><p>Le registre installé, nous pouvons créer les métriques dont nous avons besoin.</p>
<p>Voici les différents types de métriques disponibles :</p>
<ul>
<li>la jauge</li>
<li>le compteur</li>
<li>la mesure</li>
<li>l’histogramme</li>
<li>la mesure</li>
<li>le timer</li>
</ul>
<p>Lors de cette création, nous pouvons les identifier de façon unique dans le registre par les éléments suivants :</p>
<ul>
<li>groupe : la valeur par défaut est le package de la classe</li>
<li>type : nom de classe</li>
<li>nom : décrit le but de la métrique</li>
<li>scope (optionel) : permet de différentier des métriques de plusieurs instances d’une même classe</li>
</ul>
<h3 id="la-jauge"><a href="#la-jauge" class="headerlink" title="la jauge"></a>la jauge</h3><p>La jauge représente la valeur <strong>instantanée</strong> de ce qui est mesuré. Cette mesure simple, est à utiliser quand <strong>nous ne maîtrisons pas directement son incrément et son décrément.</strong><br>C’est le cas quand la valeur représente un système externe, ou quand celle-ci est maîtrisée par une librairie tierce. </p>
<p>Un exemple d’usage de la jauge est le nombre de sessions actives dans une application web.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">registry.register(name(SessionStore.class, <span class="string">"active-sessions"</span>), <span class="keyword">new</span> Gauge&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> store.getActiveSessions();</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="la-jauge-JMX"><a href="#la-jauge-JMX" class="headerlink" title="la jauge JMX"></a>la jauge JMX</h4><p>Cette jauge spécialisée permet d’intégrer <strong>facilement</strong> dans le registre Metrics, une valeur exposée via JMX. Metrics peut donc devenir l’unique référentiel de métriques applicatives, en récupérant des données tierces via JMX, afin de les exposer via d’autres canaux (JMX, Graphite, Ganglia etc…).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">registry.register(name(SessionStore.class, <span class="string">"cache-evictions"</span>),</div><div class="line">                 <span class="keyword">new</span> JmxAttributeGauge(<span class="string">"net.sf.ehcache:type=Cache,scope=sessions,name=eviction-count"</span>, <span class="string">"Value"</span>));</div></pre></td></tr></table></figure>
<h4 id="la-jauge-ratio"><a href="#la-jauge-ratio" class="headerlink" title="la jauge ratio"></a>la jauge ratio</h4><p>Cette jauge permet d’intégrer dans Metrics, le résultat du <strong>rapport entre deux variables</strong>.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheHitRatio</span> <span class="keyword">extends</span> <span class="title">RatioGauge</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Meter hits;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Timer calls;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CacheHitRatio</span><span class="params">(Meter hits, Timer calls)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.hits = hits;</div><div class="line">        <span class="keyword">this</span>.calls = calls;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Ratio <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Ratio.of(hits.oneMinuteRate(),</div><div class="line">                        calls.oneMinuteRate());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="la-jauge-cachee"><a href="#la-jauge-cachee" class="headerlink" title="la jauge cachée"></a>la jauge cachée</h4><p>Cette jauge permet de réutiliser pendant un temps paramétrable via un <strong>cache</strong>, un résultat coûteux à récupérer.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">registry.register(name(Cache.class, cache.getName(), <span class="string">"size"</span>),</div><div class="line">                  <span class="keyword">new</span> CachedGauge&lt;Long&gt;(<span class="number">10</span>, TimeUnit.MINUTES) &#123;</div><div class="line">                      <span class="meta">@Override</span></div><div class="line">                      <span class="function"><span class="keyword">protected</span> Long <span class="title">loadValue</span><span class="params">()</span> </span>&#123;</div><div class="line">                          <span class="comment">// assume this does something which takes a long time</span></div><div class="line">                          <span class="keyword">return</span> cache.getSize();</div><div class="line">                      &#125;</div><div class="line">                  &#125;);</div></pre></td></tr></table></figure>
<h4 id="la-jauge-derivee"><a href="#la-jauge-derivee" class="headerlink" title="la jauge dérivée"></a>la jauge dérivée</h4><p>Cette jauge permet de calculer un résultat <strong>à partir d’une jauge déjà présente</strong> dans le registre de Metrics.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueueManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Queue queue;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QueueManager</span><span class="params">(MetricRegistry metrics, String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.queue = <span class="keyword">new</span> Queue();</div><div class="line">        metrics.register(MetricRegistry.name(QueueManager.class, name, <span class="string">"size"</span>),</div><div class="line">                         <span class="keyword">new</span> Gauge&lt;Integer&gt;() &#123;</div><div class="line">                             <span class="meta">@Override</span></div><div class="line">                             <span class="function"><span class="keyword">public</span> Integer <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">                                 <span class="keyword">return</span> queue.size();</div><div class="line">                             &#125;</div><div class="line">                         &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="le-compteur"><a href="#le-compteur" class="headerlink" title="le compteur"></a>le compteur</h3><p>représente une mesure maîtrisée par l’application, <strong>qui s’incrémente et se décrémente</strong>.<br>Un exemple de compteur pourrait être le nombre de tâches planifiées en cours d’exécution à un instant t.<br>Tous les compteurs ont une valeur initiale de 0.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> Counter pendingJobs = metrics.counter(name(QueueManager.class, <span class="string">"pending-jobs"</span>));</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addJob</span><span class="params">(Job job)</span> </span>&#123;</div><div class="line">    pendingJobs.inc();</div><div class="line">    queue.offer(job);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Job <span class="title">takeJob</span><span class="params">()</span> </span>&#123;</div><div class="line">    pendingJobs.dec();</div><div class="line">    <span class="keyword">return</span> queue.take();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="l’histogramme"><a href="#l’histogramme" class="headerlink" title="l’histogramme"></a>l’histogramme</h3><p>L’histogramme représente <strong>la distribution statistique de valeurs d’un ensemble de données</strong>.<br>Cela nous permet d’avoir des informations comme la moyenne, le minimum, le maximum, la médiane, la déviation standard, les quartiles ou percentiles.<br>Afin d’éviter un plantage, lorsque le calcul porte sur un grand nombre de données, Metrics réalise un échantillonage statistique représentatif, via différents algorithmes, appelés <strong>Reservoirs</strong>. </p>
<p>Les réservoirs fournis, hormis le dernier présenté, ont la particularité d’avoir <strong>une occupation mémoire restreinte</strong>.</p>
<h4 id="Des-echantillons-uniformes"><a href="#Des-echantillons-uniformes" class="headerlink" title="Des échantillons uniformes"></a>Des échantillons uniformes</h4><p>Il existe <em>l’algorithme de Vitter</em>, qui produit des échantillons uniformes. Celui-ci est intéressant pour faire une <strong>analyse à long terme</strong>, mais n’est pas adaptée pour savoir si la distribution des données porte un changement significatif récent.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Histogram histogram= METRIC_REGISTRY.register(<span class="string">"myLongTermHistogram"</span>,<span class="keyword">new</span> Histogram(<span class="keyword">new</span> UniformReservoir()));</div></pre></td></tr></table></figure>
<h4 id="Des-echantillons-recents"><a href="#Des-echantillons-recents" class="headerlink" title="Des échantillons récents"></a>Des échantillons récents</h4><p>Il existe aussi un algorithme mettant un fort poids statistique sur des données récentes. Celui-ci est à privilégier lorsque l’on veut avoir une <strong>vision récente de la distribution des évenements</strong>.</p>
<p>Cette algorithme est utilisé par défaut dans les Timers.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Histogram histogram= METRIC_REGISTRY.register(<span class="string">"myshortTermHistogram"</span>,<span class="keyword">new</span> Histogram(<span class="keyword">new</span> ExponentiallyDecayingReservoir()));</div></pre></td></tr></table></figure>
<h4 id="Des-echantillons-a-fenetre-glissante"><a href="#Des-echantillons-a-fenetre-glissante" class="headerlink" title="Des échantillons à fenêtre glissante"></a>Des échantillons à fenêtre glissante</h4><p>cet algorithme permet d’étudier la <strong>distribution des N dernières données</strong>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Histogram histogram= METRIC_REGISTRY.register(<span class="string">""</span>,<span class="keyword">new</span> Histogram(<span class="keyword">new</span> SlidingWindowReservoir(<span class="number">1024</span>)));</div></pre></td></tr></table></figure>
<h4 id="Des-echantillons-temporels-a-fenetre-glissante"><a href="#Des-echantillons-temporels-a-fenetre-glissante" class="headerlink" title="Des échantillons temporels à fenêtre glissante"></a>Des échantillons temporels à fenêtre glissante</h4><p>cet algorithme permet d’étudier <strong>la distribution des N dernières secondes</strong>.<br>Un bémol est à apporter concernant cet algorithme, qui contrairement aux autres, porte sur la totalité des données des N dernières secondes, ce qui peut représenter <strong>un volume en mémoire important</strong>. Cet algorithme est aussi le plus lent.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Histogram histogram= METRIC_REGISTRY.register(<span class="string">"lastTenMinutes"</span>,<span class="keyword">new</span> Histogram(<span class="keyword">new</span> SlidingTimeWindowReservoir(<span class="number">10</span>,TimeUnit.MINUTES)));</div></pre></td></tr></table></figure>
<h3 id="la-mesure"><a href="#la-mesure" class="headerlink" title="la mesure"></a>la mesure</h3><p>La mesure mesure <strong>la fréquence</strong> à laquelle surviennent les évenements sur les périodes suivantes : </p>
<ul>
<li>la durée de vie complète de l’application</li>
<li>les 15 dernières minutes</li>
<li>les 5 dernières minutes</li>
<li>la dernière minute</li>
</ul>
<p>Le nombre de requêtes par seconde pendant les 5 dernières minutes est un bon exemple de mesures.</p>
<p>L’alimentation de cette mesure se fait de la façon suivante :<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> Meter requests = metrics.meter(name(RequestHandler.class, <span class="string">"requests"</span>));</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request request, Response response)</span> </span>&#123;</div><div class="line">    requests.mark();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="le-timer"><a href="#le-timer" class="headerlink" title="le timer"></a>le timer</h3><p>Le timer représente <strong>un histogramme des durées et une mesure de la fréquence d’apparition</strong>.</p>
<p>Un résulat issu de l’usage du timer serait : </p>
<p> à 1500 requêtes par seconde, notre latence augmente de 25 à 357 ms.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> Timer timer = registry.timer(name(Filter.class, <span class="string">"requests"</span>));</div><div class="line"></div><div class="line"><span class="keyword">final</span> Timer.Context context = timer.time();</div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">// handle request</span></div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">    context.stop();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>J’espère que ce premier article sur Metrics, vous permettra d’avoir <strong>une vue d’ensemble des différentes métriques disponibles</strong>.</p>
<p>Les trois autres articles de cette série porteront, dans l’ordre, sur <a href="/blog/2013/10/11/metrics-pour-mesurer-efficacement-les-performances-integration-avec-jee/">l’intégration de Metrics dans une application web JEE</a>, <a href="/blog/2013/10/11/metrics-pour-mesurer-efficacement-les-performances-integration-avec-spring-et-guice/">l’intégration de Metrics avec spring et guice</a> et <a href="/blog/2013/10/11/metrics-pour-mesurer-efficacement-les-performances-integration-avec-JDBC-logback-et-jersey/">l’intégration de Metrics avec JDBC, logback et jersey</a>.</p>
<h2 id="References"><a href="#References" class="headerlink" title="Références"></a>Références</h2><ul>
<li><a href="http://metrics.codahale.com/manual/core/" target="_blank" rel="external">Metrics</a></li>
<li><a href="https://github.com/clescot/metrics-example" target="_blank" rel="external">application example liée à cette série d’articles</a></li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-05-02T22:15:00.000Z"><a href="/2013/05/03/2013-05-03-web-debug-tag-visualiser-facilement-les-variables-disponibles-des-jsp-dans-son-navigateur/">03/05/13</a></time>
      
      
  
    <h1 class="title"><a href="/2013/05/03/2013-05-03-web-debug-tag-visualiser-facilement-les-variables-disponibles-des-jsp-dans-son-navigateur/">Web-Debug-Tag : Visualiser Facilement Les Variables Des Jsp Dans Son Navigateur</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="Un-besoin-de-communication"><a href="#Un-besoin-de-communication" class="headerlink" title="Un besoin de communication"></a>Un besoin de communication</h1><p>Lors de mes missions, j’ai pu observer différentes organisations d’équipe de développement d’applications web. </p>
<p>Dans certains cas, une sous-équipe est dédiée uniquement à la réalisation de la couche graphique (<em>le “front”</em>), et une autre à la partie serveur (<em>le “back”</em>). Ceci peut engendrer une “frontière” technique, une opacité quant aux variables disponibles dans les JSP fournies par les développeurs “back”.</p>
<p>Afin d’améliorer <strong>la communication entre les équipes</strong>, <a href="https://github.com/jeremyGoupil" target="_blank" rel="external">Jérémy Goupil</a> et moi avons codé une taglib appelée <a href="https://github.com/figarocms/web-debug-tag" target="_blank" rel="external">web-debug-tag</a>, permettant de <strong>rendre visible</strong> aux développeurs front ces variables.</p>
<p>Je vous présente donc dans cet article, son principe, son installation, et son usage, d’abord dans une application web simple, puis dans un cas plus complexe.</p>
<h1 id="Web-debug-tag-kesako"><a href="#Web-debug-tag-kesako" class="headerlink" title="Web-debug-tag, kesako ?"></a>Web-debug-tag, kesako ?</h1><p>Cette taglib <strong>sérialise</strong> dans la réponse du serveur, au format <strong>JSON</strong>, les variables et leurs valeurs, qu’elles soient dans les scopes <em>page</em>, <em>request</em>, <em>session</em> ou <em>application</em>. </p>
<p>Les valeurs des variables peuvent être aussi bien des chaînes de caractères que des arbres d’objets, le tag utilisant la librairie <a href="https://github.com/FasterXML/jackson-core" target="_blank" rel="external">Jackson</a> pour sérialiser le tout. Seuls les champs publics des objets, ou ceux ayant des accesseurs publics seront sérialisés.</p>
<p>De plus, une fois ces objets java sérialisés en JSON, du code client met dans la console javascript ce résultat pour être facilement visualisé dans le navigateur.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>L’installation de cette librairie, pour les projets sous maven, nécessite l’ajout dans votre fichier <code>pom.xml</code> de la section suivante : </p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;fr.figarocms&lt;/group&gt;
    &lt;artifactId&gt;web-debug-tag&lt;/artifactId&gt;
    &lt;version&gt;1.6&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>Cet ajout permettra à votre projet d’inclure dans votre fichier <code>war</code>, le jar de la taglib.</p>
<p>Une fois installé, vous pouvez maintenant inclure dans vos JSP la directive suivante:</p>
<pre><code>&lt;%@ taglib prefix=&quot;debug&quot; uri=&quot;https://github.com/figarocms/web-debug-tag&quot;%&gt;
</code></pre><p>suivi par le tag en lui-même:</p>
<pre><code>&lt;debug:debugModel/&gt;
</code></pre><p>SI votre application comporte de nombreuses pages avec des parties communes, vous utilisez certainement un moteur de template. Placez donc cette directive dans un template global pour qu’il s’applique à toutes les JSP de l’application.</p>
<h2 id="A-utiliser-uniquement-pour-le-developpement"><a href="#A-utiliser-uniquement-pour-le-developpement" class="headerlink" title="À utiliser uniquement pour le développement"></a>À utiliser uniquement pour le développement</h2><p>Cette librairie exposant toutes les variables de l’application côté navigateur, celle-ci n’est pas activée par défaut ; {“l’activation du web-debug-tag en production est totalement déconseillée”}, principalement pour des raisons de sécurité.</p>
<p>Pour l’activer, il faut donc mettre dans la ligne de commande lançant votre serveur d’applications le paramètre suivant:</p>
<pre><code>-Ddebug.jsp=true
</code></pre><p>Un message d’avertissement s’affichera néanmoins à chaque démarrage pour vous rappeler que ce n’est qu’une librairie dédiée aux environnements de développement.</p>
<h2 id="Une-application-web-d’exemple"><a href="#Une-application-web-d’exemple" class="headerlink" title="Une application web d’exemple"></a>Une application web d’exemple</h2><p>J’ai codé une application basique afin d’illustrer l’usage du web-debug-tag.</p>
<p>Pour tester le résultat, vous pouvez cloner le repository github par la commande suivante : </p>
<pre><code>git clone https://github.com/clescot/web-debug-tag-example
</code></pre><p>Dans le répertoire <em>web-debug-tag-example</em> nouvellement crée, vous pouvez lancer la commande maven suivante pour lancer un serveur jetty:</p>
<pre><code>mvn org.eclipse.jetty:jetty-maven-plugin:9.0.2.v20130417:run-exploded
</code></pre><h2 id="Rendu"><a href="#Rendu" class="headerlink" title="Rendu"></a>Rendu</h2><p>Le tag génère du code, qui met dans l’objet javascript <code>console</code> la grappe d’objets JSON générée.</p>
<p>voici un exemple de rendu sous ce même jetty:</p>
{% img right /images/capture_web-debug-tag.png 1855 1056  les variables jsp apparaissent dans l'onglet console de firebug  %}
<p>On peut voir dans cette capture d’écran, la sérialisation d’éléments présents dans les différents scopes de <a href="https://github.com/clescot/web-debug-tag-example" target="_blank" rel="external">l’application web créée pour l’article</a>, via la console <a href="https://getfirebug.com" target="_blank" rel="external">Firebug</a> sous Firefox. D’autres navigateurs tels Chrome permettent de visualiser aussi la sortie de l’objet console.</p>
<p>On pourra noter dans cette capture, la sérialisation d’objets dans les différents scopes, que les objets soient simples (chaînes de caractères, entiers), ou complexes (objets contenus dans d’autres objets). </p>
<h2 id="Exclusion-de-certaines-classes-non-serialisables"><a href="#Exclusion-de-certaines-classes-non-serialisables" class="headerlink" title="Exclusion de certaines classes non sérialisables"></a>Exclusion de certaines classes non sérialisables</h2><p>Certaines classes particulières, ne sont pas sérialisables comme des proxies Spring, Sitemesh ou Hibernate, sauf à utiliser <a href="https://github.com/FasterXML/jackson-module-hibernate" target="_blank" rel="external">des modules Jackson tierces</a>. Ceci se traduit par une <a href="http://fasterxml.github.io/jackson-databind/javadoc/2.2.0/com/fasterxml/jackson/databind/JsonMappingException.html" target="_blank" rel="external">JsonMappingException</a> levée par <a href="https://github.com/FasterXML/jackson-core" target="_blank" rel="external">Jackson</a>, qui englobe des StackOverflowError, syndrôme de la boucle infinie. </p>
<p>Il est donc possible, via l’utilisation d’un paramètre de contexte dans le fichier <code>web.xml</code>, de définir les classes à exclure de la sérialisation via <a href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html" target="_blank" rel="external">une expression régulière</a>. A noter que ces classes peuvent être présentes à différents niveaux de la grappe d’objets à sérialiser.</p>
<p>voici un exemple de configuration d’exclusion évitant des problèmes liés aux classes de Tomcat 7, Jetty 9, sitemesh et Spring:</p>
<pre><code>&lt;context-param&gt;
    &lt;param-name&gt;webdebug.excludes&lt;/param-name&gt;
    &lt;param-value&gt;org.springframework.*,__spring.*,__sitemesh.*,org.apache.jasper.*,org.apache.catalina.*,org.eclipse.jetty.webapp.Context,org.eclipse.jetty.server.*,org.eclipse.jetty.servlet.*,org.eclipse.jetty.webapp.*&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre><h2 id="Utilisation-du-web-debug-tag-dans-une-application-web-plus-complexe"><a href="#Utilisation-du-web-debug-tag-dans-une-application-web-plus-complexe" class="headerlink" title="Utilisation du web-debug-tag dans une application web plus complexe"></a>Utilisation du web-debug-tag dans une application web plus complexe</h2><p>l’équipe du framework Spring, fournit <a href="https://github.com/SpringSource/spring-petclinic" target="_blank" rel="external">une application web exemple</a> à laquelle j’ai ajouté, <a href="https://github.com/clescot/spring-petclinic" target="_blank" rel="external">dans un fork du repository github</a>, le web-debug-tag, pour tester une situation plus complexe.</p>
<p>voici sa configuration dans le <code>web.xml</code>, créée après plusieurs essais permettant d’éviter des JsonMappingException :</p>
<pre><code> &lt;context-param&gt;
    &lt;param-name&gt;webdebug.excludes&lt;/param-name&gt;
    &lt;param-value&gt;org.springframework.web.context.support.ServletContextResourcePatternResolver,org.apache.naming.*,
        org.springframework.aop.*,net.sf.ehcache.DiskStorePathManager,org.springframework.context.support.*,__spring.*,__sitemesh.*,org.apache.jasper.*,org.apache.catalina.*,org.eclipse.jetty.webapp.Context,net.sf.ehcache.CacheManager,org.apache.commons.dbcp.BasicDataSource,org.springframework.beans.factory.support.*,org.eclipse.jetty.server.*,org.eclipse.jetty.servlet.*,org.eclipse.jetty.webapp.*&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre><p>Cette configuration pourrait être affinée si nécessaire, afin de voir plus d’informations liées à Spring (les développeurs web en ont-ils besoin ?).</p>
<p>voici un exemple de rendu des variables via le web-debug-tag : </p>
<img src="/images/Capture-spring-pet-clinic.png" class="right" width="1615" height="1026" title="les variables jsp apparaissent dans l" alt="onglet console de firebug">
<h1 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h1><p>Je vous ai présenté l’installation et l’usage du web-debug-tag. Cet outil a eu un retour positif des développeurs “front” chez mon client.</p>
<p>J’espère que ce tag  vous sera utile, permettant une meilleure communication entre les parties “front” et “back”, si vos équipes sont structurées ainsi.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-04-09T14:00:00.000Z"><a href="/2013/04/09/2013-04-09-executer-en-parallele-ses-tests-junit-avec-tempus-fugit/">09/04/13</a></time>
      
      
  
    <h1 class="title"><a href="/2013/04/09/2013-04-09-executer-en-parallele-ses-tests-junit-avec-tempus-fugit/">Exécuter en Parallèle Ses Tests Junit Avec Tempus-Fugit</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="…-ou-comment-tester-si-son-code-est-thread-safe"><a href="#…-ou-comment-tester-si-son-code-est-thread-safe" class="headerlink" title="… ou comment tester si son code est thread-safe."></a>… ou comment tester si son code est <strong>thread-safe</strong>.</h2><h1 id="Le-probleme"><a href="#Le-probleme" class="headerlink" title="Le problème"></a>Le problème</h1><p>Lors du développement de services exposés sur internet (services web, servlets etc… ), il est primordial de s’assurer de la nature <strong>thread-safe</strong> du code.</p>
<p>Des problèmes d’écriture et lecture de données concurrentes, provoquant des erreurs difficilement reproductibles peuvent<br>survenir : un service sous forte charge pourrait se comporter de façon erronée sous forte charge. en bref, <strong>le code est hors de contrôle</strong>. </p>
<h1 id="Une-solution"><a href="#Une-solution" class="headerlink" title="Une solution"></a>Une solution</h1><p>L’approche habituelle pour détecter cette faiblesse est de favoriser la reproduction du problème par <strong>l’exécution concurrente</strong> (via plusieurs threads) et <strong>répétée</strong> du code.</p>
<h2 id="Concurrence-et-repetition-via-Tempus-fugit"><a href="#Concurrence-et-repetition-via-Tempus-fugit" class="headerlink" title="Concurrence et répétition via Tempus-fugit"></a>Concurrence et répétition via Tempus-fugit</h2><p>Je vous propose d’exécuter en parallèle le code via des tests unitaires <strong>[Junit]</strong> et la librairie <em>[tempus-fugit]</em>.</p>
<p>Nous testerons pour cet article, la nature <strong>thread-safe</strong> d’un service REST développé avec Jersey. Ces tests mettront en oeuvre les annotations <code>@Concurrent</code>, <code>Repeating</code>, <code>@Intermittent</code> et le runner <code>ConcurrentTestRunner</code>.</p>
<p>Les exemples de code sont présent sur <a href="https://github.com/clescot/tempus-fugit-example" target="_blank" rel="external">un repository github dédié</a>.</p>
<h2 id="Un-exemple-de-service-web"><a href="#Un-exemple-de-service-web" class="headerlink" title="Un exemple de service web"></a>Un exemple de service web</h2><p>Voici un service web <em>[JAX-RS]</em>, qui présente deux points d’entrée permettant :</p>
<ul>
<li>d’ajouter un élément à une collection </li>
<li>d’effacer le contenu de la collection</li>
</ul>
<p>Le code ci-dessous, a pour seul but d’illustrer les problèmes de concurrence d’accès. Ici, le problème vient de l’utilisation du champ de classe <code>coll</code>, sans synchronisation. L’accès à un champ de la classe, pour des services web, est la plupart du temps la partie critique du code à contrôler, que ce champ soit un champ d’instance ou un champ statique. Ainsi, il est nécessaire de garantir un accès unique au champ via du code synchronisé, ou de déclarer <code>volatile</code> le champ pour éviter que java ne cache sa valeur pour chaque thread.<br>En bref, “utilisez le moins possible de champs d’instance pour des services web.”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@Path</span>(<span class="string">"/test1"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooBar</span> </span>&#123;</div><div class="line"></div><div class="line"> 	  <span class="keyword">private</span> <span class="keyword">static</span> Collection coll = Lists.newArrayList();</div><div class="line"></div><div class="line"></div><div class="line">	   <span class="meta">@GET</span></div><div class="line">	   <span class="meta">@Path</span>(<span class="string">"/path1"</span>)</div><div class="line"> 	  <span class="function"><span class="keyword">public</span> Response <span class="title">test</span><span class="params">(@QueryParam(<span class="string">"value"</span>)</span> String value) <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line"> 	      coll.add(value);</div><div class="line"> 	      <span class="keyword">int</span> size = coll.size();</div><div class="line"> 	      <span class="keyword">return</span> Response.ok(<span class="string">""</span>+size).build();</div><div class="line"></div><div class="line">	   &#125;</div><div class="line"></div><div class="line"> 	  <span class="meta">@GET</span></div><div class="line"> 	  <span class="meta">@Path</span>(<span class="string">"/clear"</span>)</div><div class="line"> 	  <span class="function"><span class="keyword">public</span> Response <span class="title">test2</span><span class="params">(@QueryParam(<span class="string">"value"</span>)</span> String value)</span>&#123;</div><div class="line">	       coll.clear();</div><div class="line">	       <span class="keyword">return</span> Response.ok(<span class="string">"ok"</span>).build();</div><div class="line"> 	  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="L’execution-parallele"><a href="#L’execution-parallele" class="headerlink" title="L’exécution parallèle"></a>L’exécution parallèle</h1><p>Comme indiqué précédemment, l’exécution parallèle est une des contraintes à imposer  au code pour favoriser l’émergeance du problème.</p>
<p>La librairie <em>tempus-fugit</em> nous propose deux mécanismes pour exécuter du code en parallèle :</p>
<ul>
<li>l’annotation <code>@Concurrent</code></li>
<li>le runner <code>ConcurrentTestRunner</code></li>
</ul>
<h2 id="L’annotation-Concurrent"><a href="#L’annotation-Concurrent" class="headerlink" title="L’annotation @Concurrent"></a>L’annotation <code>@Concurrent</code></h2><p>La librairie <em>[Tempus-Fugit]</em>, fournit une <em>TestRule</em> , intitulée <code>ConcurrentRule</code>, qui s’active lorsque l’annotation <code>@Concurrent</code> est présente.</p>
<p><code>&quot;L&#39;annotation @Concurrent permet d&#39;exécuter une même méthode de test de façon concurrente sur plusieurs threads.&quot;</code></p>
<p>A noter que les <code>TestRule</code> étaient anciennement appelées <code>MethodRule</code> jusqu’à [<em>Junit</em>] 4.8.</p>
<p>Les deux tests ci-dessous permettent de voir l’intérêt de cette <em>TestRule</em> :</p>
<ul>
<li>le premier test ne contient pas l’annotation <code>@Concurrent</code>. Il n’est donc exécuté qu’une seule fois, et s’exécute avec succès. Le non support d’une exécution concurrente <strong>n’est donc pas détecté</strong>.</li>
<li>le second test est identique au premier, mais contient l’annotation <code>@Concurrent</code>. Ce Test est exécuté deux fois(<code>@concurrent(count=2)</code>, via deux threads distincts. Ce second test <strong>permet de détecter</strong> le non-support du code d’une exécution multi-threadée, notamment à cause de l’utilisation du champ de classe <code>coll</code>.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiThreadTest</span> <span class="keyword">extends</span> <span class="title">WebRunner</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger LOGGER = LoggerFactory.getLogger(MultiThreadTest.class);</div><div class="line"></div><div class="line"> 	    <span class="meta">@Rule</span></div><div class="line">    <span class="keyword">public</span> ConcurrentRule concurrentRule = <span class="keyword">new</span> ConcurrentRule();</div><div class="line"></div><div class="line"> </div><div class="line">    <span class="keyword">private</span> WebResource webResource1 = resource().path(<span class="string">"/test1/path1"</span>).queryParam(<span class="string">"value"</span>, <span class="string">"4"</span>);</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testResources_without_concurrent_annotation</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> size = <span class="number">1</span>; size &lt; <span class="number">10</span>; size++) &#123;</div><div class="line">            assertThat(Long.parseLong(call(webResource1)), is(size));</div><div class="line">        &#125;</div><div class="line">	       WebResource webResource2 = resource().path(<span class="string">"/test1/clear"</span>);</div><div class="line">        call(webResource2);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="meta">@Concurrent</span>(count = <span class="number">2</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testResources_with_concurrent_annotation</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> size = <span class="number">1</span>; size &lt; <span class="number">10</span>; size++) &#123;</div><div class="line">            assertThat(Long.parseLong(call(webResource1)), is(size));</div><div class="line">        &#125;</div><div class="line"> 	      WebResource webResource2 = resource().path(<span class="string">"/test1/clear"</span>);</div><div class="line">        call(webResource2);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">call</span><span class="params">(<span class="keyword">final</span> WebResource webResource)</span> </span>&#123;</div><div class="line"></div><div class="line">        String response = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line"> 	          response = webResource.get(String.class);</div><div class="line">   	        assertThat(<span class="string">"path ="</span> + webResource.getURI() + <span class="string">"response="</span> + response, !response.isEmpty(), is(<span class="keyword">true</span>));</div><div class="line">	           LOGGER.info(<span class="string">"response="</span> + response);</div><div class="line"> 	      &#125; <span class="keyword">catch</span> (UniformInterfaceException t) &#123;</div><div class="line">  	         Assert.fail(t.getMessage());</div><div class="line">  	         LOGGER.error(<span class="string">"erreur message="</span> + t.getMessage());</div><div class="line">            LOGGER.error(<span class="string">"erreur réponse="</span> + t.getResponse());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> response;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Le-runner-ConcurrentTestRunner"><a href="#Le-runner-ConcurrentTestRunner" class="headerlink" title="Le runner ConcurrentTestRunner"></a>Le runner <code>ConcurrentTestRunner</code></h2><p>A l’instar de l’annotation <code>@Concurrent</code>, un runner Junit permet d’exécuter l’ensemble des tests d’une classe chacun dans un Thread.<br>Ainsi, la classe de test suivante comporte 3 méthodes de test : 3 threads seront donc crées pour exécuter dans chacun d’eux une méthode de test en parallèle.</p>
<p>Le léger avantage de cette voie est la <strong>simplicité</strong> : il sufit de déclarer le runner pour que toutes les méthodes soient exécutés en parallèle ; pas besoin de déclarer la TestRule et d’annoter chaque test. </p>
<p>Les deux principaux inconvénients sont le <strong>manque de flexibilité</strong> car on ne peut spécifier qu’un seul runner Junit pour une classe de test, et <strong>le nombre de threads par méthode de test est fixe</strong> (1 thread par test).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">@RunWith</span>(ConcurrentTestRunner.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrentTest</span> <span class="keyword">extends</span> <span class="title">WebRunner</span></span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Logger LOGGER = LoggerFactory.getLogger(MultiThreadTest.class);</div><div class="line"></div><div class="line">        <span class="keyword">private</span> WebResource webResource1 = resource().path(<span class="string">"/test1/path1"</span>).queryParam(<span class="string">"value"</span>, <span class="string">"4"</span>);</div><div class="line"></div><div class="line">        <span class="meta">@Test</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">first_test</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">long</span> size = <span class="number">1</span>; size &lt; <span class="number">10</span>; size++) &#123;</div><div class="line">                assertThat(Long.parseLong(call(webResource1)), is(size));</div><div class="line">            &#125;</div><div class="line">            WebResource webResource2 = resource().path(<span class="string">"/test1/clear"</span>);</div><div class="line">            call(webResource2);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Test</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">second_test</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">long</span> size = <span class="number">1</span>; size &lt; <span class="number">10</span>; size++) &#123;</div><div class="line">                assertThat(Long.parseLong(call(webResource1)), is(size));</div><div class="line">            &#125;</div><div class="line">            WebResource webResource2 = resource().path(<span class="string">"/test1/clear"</span>);</div><div class="line">            call(webResource2);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Test</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">third_test</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">long</span> size = <span class="number">1</span>; size &lt; <span class="number">10</span>; size++) &#123;</div><div class="line">                assertThat(Long.parseLong(call(webResource1)), is(size));</div><div class="line">            &#125;</div><div class="line">            WebResource webResource2 = resource().path(<span class="string">"/test1/clear"</span>);</div><div class="line">            call(webResource2);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">private</span> String <span class="title">call</span><span class="params">(<span class="keyword">final</span> WebResource webResource)</span> </span>&#123;</div><div class="line"></div><div class="line">            String response = <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                response = webResource.get(String.class);</div><div class="line">                assertThat(<span class="string">"path ="</span> + webResource.getURI() + <span class="string">"response="</span> + response, !response.isEmpty(), is(<span class="keyword">true</span>));</div><div class="line">                LOGGER.info(<span class="string">"response="</span> + response);</div><div class="line">            &#125; <span class="keyword">catch</span> (UniformInterfaceException t) &#123;</div><div class="line">                Assert.fail(t.getMessage());</div><div class="line">                LOGGER.error(<span class="string">"erreur message="</span> + t.getMessage());</div><div class="line">                LOGGER.error(<span class="string">"erreur réponse="</span> + t.getResponse());</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> response;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="L’execution-repetee"><a href="#L’execution-repetee" class="headerlink" title="L’exécution répétée"></a>L’exécution répétée</h1><p>La seconde contrainte à imposer au code est l’exécution répétée.</p>
<p>La librairie <em>tempus-fugit</em> nous propose deux mécanismes pour exécuter du code de façon répétée :</p>
<ul>
<li>l’annotation <code>@Repeating</code></li>
<li>L’annotation <code>@Intermittent</code> </li>
</ul>
<h2 id="L’annotation-Repeating"><a href="#L’annotation-Repeating" class="headerlink" title="L’annotation @Repeating"></a>L’annotation <code>@Repeating</code></h2><p>Souvent, la résolution des problèmes d’exécution concurrente de code n’est pas évidente, contrairement à l’exemple de cet article. Le bug se produit de façon erratique. Il est donc nécessaire de reproduire l’exécution des tests un grand nombre de fois, pour avoir la chance de faire échouer le code.</p>
<p><em>Tempus-fugit</em>, nous fournit une autre <em>TestRule</em> intitulée <code>RepeatingRule</code>, qui est associée avec l’annotation <code>@Repeating</code>.</p>
<p>Elle permet d’exécuter un grand nombre de fois une méthode de test. Elle peut se cumuler avec l’annotation <code>@Concurrent</code>.</p>
<p>Voici un exemple d’une utilisation combinée de ces deux annotations :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">   <span class="meta">@Rule</span></div><div class="line">   <span class="keyword">public</span> RepeatingRule repeatingRule = <span class="keyword">new</span> RepeatingRule();</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="meta">@Concurrent</span>(count = <span class="number">2</span>)</div><div class="line"><span class="meta">@Repeating</span>(repetition=<span class="number">4</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testResources_with_concurrent_annotation</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="keyword">for</span> (<span class="keyword">long</span> size = <span class="number">1</span>; size &lt; <span class="number">10</span>; size++) &#123;</div><div class="line">       assertThat(Long.parseLong(call(webResource1)), is(size));</div><div class="line">   &#125;</div><div class="line"> 	   WebResource webResource2 = resource().path(<span class="string">"/test1/clear"</span>);</div><div class="line">   call(webResource2);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="L’annotation-Intermittent"><a href="#L’annotation-Intermittent" class="headerlink" title="L’annotation @Intermittent"></a>L’annotation <code>@Intermittent</code></h2><p>Cette annotation a de grandes similitudes avec l’annotation <code>@Repeating</code>, à ceci prêt qu’elle n’est pas associée avec une <code>TestRule</code>, mais avec le <em>runner Junit</em> <code>IntermittentTestRunner</code>. Elle possède également un attribut nommé <code>repetition</code>.</p>
<p>Cette association a pour avantage d’exécuter <strong>à chaque répétition</strong>, les méthodes annotées par <code>@Before</code> et <code>@After</code>, contrairement aux <code>TestRule</code>.<br>{“Le principal inconvénient de @Intermittent est qu’on ne peut utiliser plus d’un runner Junit”}; on ne peut donc pas dans cette configuration utiliser un autre <em>runner</em>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">@RunWith</span>(IntermittentTestRunner.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntermittentTest</span> <span class="keyword">extends</span> <span class="title">WebRunner</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger LOGGER = LoggerFactory.getLogger(MultiThreadTest.class);</div><div class="line">    <span class="keyword">private</span> WebResource webResource1 = resource().path(<span class="string">"/test1/path1"</span>).queryParam(<span class="string">"value"</span>, <span class="string">"4"</span>);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="meta">@Intermittent</span>(repetition = <span class="number">30</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test_method1_with_intermittent_annotation</span><span class="params">()</span> </span>&#123;</div><div class="line">        call(webResource1);</div><div class="line">        LOGGER.info(<span class="string">"method1 executed"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="meta">@Intermittent</span>(repetition = <span class="number">10</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test_method2_with_intermittent_annotation</span><span class="params">()</span> </span>&#123;</div><div class="line">        call(webResource1);</div><div class="line">        LOGGER.info(<span class="string">"method2 executed"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">call</span><span class="params">(<span class="keyword">final</span> WebResource webResource)</span> </span>&#123;</div><div class="line"></div><div class="line">        String response = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            response = webResource.get(String.class);</div><div class="line">            assertThat(<span class="string">"path ="</span> + webResource.getURI() + <span class="string">"response="</span> + response, !response.isEmpty(), is(<span class="keyword">true</span>));</div><div class="line">            LOGGER.info(<span class="string">"response="</span> + response);</div><div class="line">        &#125; <span class="keyword">catch</span> (UniformInterfaceException t) &#123;</div><div class="line">            Assert.fail(t.getMessage());</div><div class="line">            LOGGER.error(<span class="string">"erreur message="</span> + t.getMessage());</div><div class="line">            LOGGER.error(<span class="string">"erreur réponse="</span> + t.getResponse());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> response;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>#Conclusion</p>
<p>La librairie <em>tempus-fugit</em> nous permet de tester la bonne exécution du code dans un environnement concurrent.<br>Elle nous offre deux alternatives pour mettre en place une exécution <strong>parallèle</strong> et <strong>répétée</strong> des tests unitaires Junit.<br>{“Tempus-fugit pallie au manque du support natif de Junit des contraintes de concurrence.”} <em>TestNG</em>, l’autre librairie de test, intègre nativement ces problématiques via les attributs <code>threadPoolSize</code>, et <code>invocationCount</code>. A noter que <em>TestNG</em> inclut aussi, <del>contrairement à <em>Junit</em> et <em>tempus-fugit</em></del>, les attributs <code>timeout</code> et <code>invocationTimeOut</code> pour définir respectivement le temps que le test et l’ensemble des tests doivent prendre au maximum pour être considéré comme positifs.</p>
<p><em>Tempus-fugit</em> fournit d’autres fonctionnalités, comme entre autres, une gestion facilitée des Threads (interruptions, pause, réveil), une gestion des verrous, et une détection des deadlocks.</p>
<h2 id="Mise-a-jour-du-13-04-2013"><a href="#Mise-a-jour-du-13-04-2013" class="headerlink" title="Mise à jour du 13/04/2013"></a><em>Mise à jour du 13/04/2013</em></h2><p>Junit permet bien de définir un temps d’exécution maximum par méthode via le paramètre <code>timeout</code> de l’annotation <code>@Test</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//5 secondes maximum</span></div><div class="line"><span class="meta">@Test</span>(timeout=<span class="number">500</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">monTest</span><span class="params">()</span> </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Junit permet aussi de définir un temps limite pour tous les tests d’une classe via la @Rule <code>TimeOut</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaCLasseDeTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Rule</span></div><div class="line">    <span class="keyword">public</span> Timeout globalTimeout = <span class="keyword">new</span> Timeout(<span class="number">8000</span>); <span class="comment">// 8 secondes maximum par méthode de test</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">monPremierTest</span><span class="params">()</span> </span>&#123;</div><div class="line">      ......</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">monDeuxiemeTest</span><span class="params">()</span> </span>&#123;</div><div class="line">       ...   &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="References"><a href="#References" class="headerlink" title="Références"></a>Références</h2><ul>
<li><a href="http://www.junit.org" target="_blank" rel="external">Junit</a></li>
<li><a href="http://tempusfugitlibrary.org" target="_blank" rel="external">tempus-fugit</a></li>
<li><a href="http://jax-rs-spec.java.net" target="_blank" rel="external">JAX-RS</a></li>
<li><a href="http://testng.org" target="_blank" rel="external">TestNG</a></li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-02-06T00:03:00.000Z"><a href="/2013/02/06/2013-02-06-les-classes-de-test-ne-sont-pas-des-poubelles/">06/02/13</a></time>
      
      
  
    <h1 class="title"><a href="/2013/02/06/2013-02-06-les-classes-de-test-ne-sont-pas-des-poubelles/">Les Classes De Test Ne Sont Pas Des Poubelles ! </a></h1>
  

    </header>
    <div class="entry">
      
        <img src="/images/sign-34163_150.png" class="right" width="149" height="150" title="poubelle">
<h2 id="…-ou-comment-structurer-ses-tests-unitaires"><a href="#…-ou-comment-structurer-ses-tests-unitaires" class="headerlink" title="… ou comment structurer ses tests unitaires."></a>… ou comment structurer ses tests unitaires.</h2><p>#Résumé<br>Je suis souvent confronté à des classes de test d’une longueur <strong>gigantesque</strong> dans les projets où j’interviens.<br>Leur contenu en un seul bloc est souvent illisible, quelquefois désorganisé et difficilement maintenable.</p>
<p>J’aborde dans cet article, différentes solutions d’organisation de ses classes de tests en les comparant.</p>
<p>##La solution proposée</p>
<p>Je propose d’organiser les tests via des <strong>classes statiques internes</strong> couplées à de l’héritage. Vous pourrez regrouper<br> vos méthodes de test par méthode testée, les exécuter sélectivement et rendre lisible la classe de test.</p>
<p>#Constat</p>
<p>Les classes de test sont, quand les tests sont nombreux, très longues.<br>Il est difficile de les appréhender d’un seul coup d’oeil.</p>
<p>Pour tester une méthode avec <a href="http://www.junit.org" target="_blank" rel="external">Junit</a>, on crée une nouvelle méthode<br>dans la classe de test pour chaque nouveau cas d’usage.</p>
<p>Ainsi, les nombreux cas de test impliquent de créer <strong>beaucoup</strong> de méthodes de test.</p>
<p>##Conséquence</p>
<p>Il est difficile de :</p>
<ul>
<li>retrouver tous les cas de test d’une méthode</li>
<li>identifier les cas de test récurrents</li>
<li>lancer uniquement tous les cas de test d’une méthode</li>
<li>avoir une vue d’ensemble de la classe de test</li>
</ul>
<p>##Exemple<br>Voici la classe <code>Foo.java</code> à tester :</p>
{% codeblock lang:java %}

    public class Foo {

        public int add(Integer a,Integer b){
        	return a.intValue()+b.intValue();
    	}

    	public int substract(Integer a,Integer b){
        	return a.intValue()-b.intValue();
    	}
    }
{% endcodeblock %}
<p>Cette classe ne comporte que deux méthodes, prenant chacune deux paramètres.</p>
<p>Malgré sa simplicité, celle-ci comprend pour chaque méthode de nombreux cas à tester :</p>
<ul>
<li>les paramètres sont null</li>
<li>un des paramètres est null</li>
<li>les paramètres sont négatifs</li>
<li>les paramètres sont positifs</li>
<li>les paramètres sont pour le premier négatif, pour l’autre positif</li>
<li>les paramètres sont pour le premier positif, pour l’autre négatif</li>
<li>le résultat est négatif</li>
<li>le résultat est positif</li>
<li>le résultat est égal à zéro</li>
<li>le résultat dépasse la limite inférieure du type <em>Integer</em></li>
<li>le résultat dépasse la limite supérieure du type <em>Integer</em></li>
<li>etc…</li>
</ul>
<p>En résulte ainsi, un code <strong>illisible</strong> (je vous épargne le code complet) :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.hamcrest.CoreMatchers.is;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.assertThat;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooTest</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line">    <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd_withNullArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        foo.add(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd_withPositiveArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">int</span> result = foo.add(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">        assertThat(result,is(<span class="number">7</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ......</div><div class="line">    ......</div><div class="line">    ......</div><div class="line"></div><div class="line">    <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSubstract_withNullArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        foo.substract(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSubstract_withPositiveArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">int</span> result = foo.substract(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">        assertThat(result,is(-<span class="number">1</span>));</div><div class="line">    &#125;</div><div class="line">    ......</div><div class="line">    ......</div><div class="line">    ......</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Diviser-le-code-pour-mieux-regner"><a href="#Diviser-le-code-pour-mieux-regner" class="headerlink" title="Diviser (le code) pour mieux régner"></a>Diviser (le code) pour mieux régner</h2><p>Face à une classe qui grossit à outrance, il est nécessaire de répartir les cas de tests, par exemple suivant la méthode testée.</p>
<p>Essayons de lister les possibilités pour regrouper les cas de test d’une même méthode.</p>
<h3 id="Des-debuts-d’organisation-les-commentaires"><a href="#Des-debuts-d’organisation-les-commentaires" class="headerlink" title="Des débuts d’organisation : les commentaires"></a>Des débuts d’organisation : les commentaires</h3><p>Pour mieux organiser ses tests, beaucoup insèrent des commentaires comme repères.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="comment">////////////// début des tests de la méthode 'add'</span></div><div class="line">.......</div><div class="line">.......</div><div class="line"><span class="comment">///////////// fin des tests de la méthode 'add'</span></div><div class="line"><span class="comment">////////////// début des tests de la méthode 'substract'</span></div><div class="line">.......</div><div class="line">.......</div><div class="line"><span class="comment">///////////// fin des tests de la méthode 'substract'</span></div></pre></td></tr></table></figure>
<h4 id="Avantages"><a href="#Avantages" class="headerlink" title="Avantages"></a>Avantages</h4><p>Les méthodes comprises entre les blocs de commentaires sont regroupées et associées à la méthode testée.</p>
<h4 id="Inconvenients"><a href="#Inconvenients" class="headerlink" title="Inconvénients"></a>Inconvénients</h4><p>Cette solution :</p>
<ul>
<li>rajoute beaucoup de bruit dans la lisibilité de la classe</li>
<li>ne resiste pas au reformatage du code effectué avec certains éditeurs de texte</li>
<li>ne permet pas de ne choisir d’exécuter qu’un sous-ensemble des tests unitaires</li>
</ul>
<p>Dans la même optique, <a href="https://sites.google.com/site/unclebobconsultingllc/" target="_blank" rel="external">Robert Martin (Uncle Bob)</a>,<br>dans son <a href="http://www.amazon.fr/gp/product/0132350882/ref=as_li_qf_sp_asin_tl?ie=UTF8&amp;camp=1642&amp;creative=6746&amp;creativeASIN=0132350882&amp;linkCode=as2&amp;tag=clescotcom08-21" target="_blank" rel="external">livre <em>Clean Code</em></a>,<br> insiste sur l’importance de la lisibilité du code, et recommande d’éviter d’encombrer celui-ci avec ce genre de commentaires. Les commentaires ne permettent pas une bonne orgnaisation du code.</p>
<h3 id="Pas-de-regions-a-la-NET-en-Java"><a href="#Pas-de-regions-a-la-NET-en-Java" class="headerlink" title="Pas de régions à la .NET en Java"></a>Pas de régions <em>à la .NET</em> en Java</h3>{% pullquote %}

A noter que du côté .NET, les directives de régions ont été ajoutées à destination des éditeurs, pour qu'ils puissent
cacher ou afficher des parties de code. Les régions sont présentes dans le code source, mais pas dans le MSIL (équivalent du *bytecode* Java).
Cette fonctionnalité a donc uniquement pour but d'améliorer la lisibilité, mais ne permet pas de raffiner l'exécution
des tests. {"Les régions .NET ne résolvent pas les problèmes d'organisation, et ne sont pas disponible du côté java."}

{% endpullquote %}
<h3 id="Une-fausse-bonne-idee-les-categories-Junit"><a href="#Une-fausse-bonne-idee-les-categories-Junit" class="headerlink" title="Une fausse bonne idée : les catégories Junit"></a>Une fausse bonne idée : les catégories Junit</h3><p><a href="http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.html" target="_blank" rel="external">Depuis junit 4.8</a>, il est possible d’ajouter des annotations,<br>afin de regrouper des méthodes (ou des classes) de test en catégories (des sortes de tags).<br>Plusieurs catégories peuvent être ajoutées à une même méthode ou classe.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooTestWithCategories</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line">    <span class="meta">@Category</span>(Add.class)</div><div class="line">    <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd_withNullArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        foo.add(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Category</span>(Add.class)</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd_withPositiveArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">int</span> result = foo.add(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">        assertThat(result,is(<span class="number">7</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Category</span>(Substract.class)</div><div class="line">    <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSubstract_withNullArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        foo.substract(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Category</span>(Substract.class)</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSubstract_withPositiveArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">int</span> result = foo.substract(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">        assertThat(result,is(-<span class="number">1</span>));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Avantages-1"><a href="#Avantages-1" class="headerlink" title="Avantages"></a>Avantages</h4><p>Les catégories Junit :</p>
<ul>
<li>rattachent les tests aux méthodes testées.</li>
<li>permettent de lancer l’exécution de tous les tests d’une méthode particulière, via un Runner Junit nommé <code>Categories</code>, et une sélection des tests via <code>@Categories.IncludeCategory</code>.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">@RunWith</span>(Categories.class)</div><div class="line"><span class="meta">@Categories</span>.IncludeCategory(Add.class)</div><div class="line"><span class="meta">@Suite</span>.SuiteClasses( &#123;FooTestWithCategories.class &#125;)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTestSuite</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Inconvenients-1"><a href="#Inconvenients-1" class="headerlink" title="Inconvénients"></a>Inconvénients</h4><p>Les catégories Junit :</p>
<ul>
<li>ne permettent pas d’isoler les tests d’une méthode par rapport aux autres :<br>les tests peuvent avoir les bonnes catégories, mais être éparpillés au sein d’une grande classe de test…</li>
<li>elles nécessitent un Runner Junit particulier <em>Categories</em>.Elles ne permettent pas d’utiliser d’autres<br>Runner Junit (un seul Runner est spécifié par exécution).</li>
<li>l’isolation des cas de test récurrents n’est pas encouragé par cette option.</li>
</ul>
<p>Les catégories Junit sont plutôt à utiliser pour différencier l’exécution de tests en fonction soit<br>de leurs dépendances techniques externes (tests d’intégration),de leur rapidité, ou d’un autre critère <strong>non fonctionnel</strong>.</p>
<h3 id="La-solution-proposee-utilisation-des-classes-internes"><a href="#La-solution-proposee-utilisation-des-classes-internes" class="headerlink" title="La solution proposée : utilisation des classes internes"></a>La solution proposée : utilisation des classes internes</h3><p><a href="http://www.junit.org/node/401" target="_blank" rel="external">Junit 4.5</a> apporte l’utilisation d’un Runner permettant de lancer des tests présents<br>dans des <strong>classes statiques internes</strong>:<br><em>Enclosed</em>, qui est présent dans un package <em>expérimental</em> (org.junit.experimental.runners.Enclosed).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">   <span class="meta">@RunWith</span>(Enclosed.class)</div><div class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooTestWithEnclosed</span> </span>&#123;</div><div class="line"><span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Add</span> </span>&#123;</div><div class="line">           <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line">           <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithNullArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">               foo.add(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">           &#125;</div><div class="line"></div><div class="line">           <span class="meta">@Test</span></div><div class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testwithPositiveArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">               <span class="keyword">int</span> result = foo.add(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">               assertThat(result,is(<span class="number">7</span>));</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Substract</span> </span>&#123;</div><div class="line">           <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();pens</div><div class="line">           <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithNullArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">               foo.substract(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">           &#125;</div><div class="line"></div><div class="line">           <span class="meta">@Test</span></div><div class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testwithPositiveArguments</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">               <span class="keyword">int</span> result = foo.substract(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">               assertThat(result,is(-<span class="number">1</span>));</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h4 id="Avantages-2"><a href="#Avantages-2" class="headerlink" title="Avantages"></a>Avantages</h4><ul>
<li>rassemble dans une structure toutes les méthodes de tests liées à une méthode testée</li>
<li>permet d’exécuter sélectivement les cas de test d’une méthode</li>
</ul>
<h4 id="Inconvenients-2"><a href="#Inconvenients-2" class="headerlink" title="Inconvénients"></a>Inconvénients</h4><ul>
<li>le runner Junit est présent dans un package au nom qui implique une existence peu pérenne (<code>experimental</code>)</li>
<li>le runner ne lance que des méthodes présentes dans des classes statiques internes. Cet inconvénient ne semble pas gênant, car il semble rarement souhaitable de mélanger des organisations         différentes (classes statiques internes et présence directe des méthodes) au sein d’une même classe.</li>
</ul>
<h3 id="Ameliorer-la-solution-heritage-couple-aux-classes-statiques-internes"><a href="#Ameliorer-la-solution-heritage-couple-aux-classes-statiques-internes" class="headerlink" title="Améliorer la solution : héritage couplé aux classes statiques internes"></a>Améliorer la solution : héritage couplé aux classes statiques internes</h3><p>On vient de voir l’intérêt d’utiliser les <strong>classes statiques internes</strong> pour regrouper les cas de test d’une méthode.<br>Afin de clarifier les cas de test récurrents à implémenter pour toute nouvelle méthode, nous pouvons utiliser<br>des <strong>interfaces internes</strong> dont héritera toute nouvelle classe statique interne.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@RunWith</span>(Enclosed.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooTestWithEnclosedAndInheritance</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyTest</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">testWithNullArguments</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">testWithPositiveArguments</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Add</span> <span class="keyword">implements</span> <span class="title">MyTest</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line">        <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithNullArguments</span><span class="params">()</span> </span>&#123;</div><div class="line">            foo.add(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Test</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithPositiveArguments</span><span class="params">()</span></span>&#123;</div><div class="line">            <span class="keyword">int</span> result = foo.add(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">            assertThat(result,is(<span class="number">7</span>));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Substract</span> <span class="keyword">implements</span> <span class="title">MyTest</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> Foo foo = <span class="keyword">new</span> Foo();</div><div class="line">        <span class="meta">@Test</span>(expected = NullPointerException.class)</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithNullArguments</span><span class="params">()</span></span>&#123;</div><div class="line">            foo.substract(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Test</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithPositiveArguments</span><span class="params">()</span></span>&#123;</div><div class="line">            <span class="keyword">int</span> result = foo.substract(<span class="number">3</span>, <span class="number">4</span>);</div><div class="line">            assertThat(result,is(-<span class="number">1</span>));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Avantages-3"><a href="#Avantages-3" class="headerlink" title="Avantages"></a>Avantages</h4><ul>
<li>Utilise une classe statique interne pour regrouper des cas de test, permet d’utiliser l’héritage pour homogénéiser<br>l’implémentation de cas de test récurrents. </li>
<li>évite la duplication de code.</li>
</ul>
<h3 id="Inconvenients-3"><a href="#Inconvenients-3" class="headerlink" title="Inconvénients"></a>Inconvénients</h3><ul>
<li>si vous utilisez une classe abstraite qui n’a pas de méthodes de test, il est possible que le Runner Junit vous lance une exception.<br>Pour régler ce problème, il faut ajouter l’annotation <em>@Ignore</em> à la classe.</li>
</ul>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Arrêtons d’ignorer les bonnes pratiques de développement dans les tests, avec pour pretexte que ce code n’ira<br>pas en production ! Le code de test n’est pas du code jetable, mais est intimement lié au code qui sera déployé.</p>
<p><strong>Les qualités du code de test et de production doivent être du même niveau.</strong></p>
<p>Utilisons les structures du langage disponibles comme les <strong>classes statiques internes</strong> pour répartir les cas de test, et <strong>l’héritage</strong> pour identifier<br>les cas de test récurrents.<br>La non-répétition du code, sa lisibilité, et sa structure cohérente, permettent d’écrire des tests plus robustes,<br>plus maintenables et compréhensibles !</p>
<h2 id="References"><a href="#References" class="headerlink" title="Références"></a>Références</h2><ul>
<li><a href="http://www.junit.org" target="_blank" rel="external">Junit</a></li>
<li><a href="http://www.junit.org/node/401" target="_blank" rel="external">Junit 4.5</a></li>
<li><a href="http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.html" target="_blank" rel="external">Junit 4.8</a></li>
<li><a href="http://www.amazon.fr/gp/product/0132350882/ref=as_li_tf_tl?ie=UTF8&amp;camp=1642&amp;creative=6746&amp;creativeASIN=0132350882&amp;linkCode=as2&amp;tag=clescotcom-21" target="_blank" rel="external">clean code</a></li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/" class="alignleft prev">Précédent</a>
  
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Recherche">
    <input type="hidden" name="q" value="site:clescot.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Catégories</h3>
  <ul class="entry">
  
    <li><a href="/categories/performance/mesure/metrique/JDBC/">JDBC</a><small>1</small></li>
  
    <li><a href="/categories/performance/mesure/metrique/JEE/">JEE</a><small>1</small></li>
  
    <li><a href="/categories/debug/jsp/variables/communication/JSON/">JSON</a><small>1</small></li>
  
    <li><a href="/categories/git/productivite/hook/push/integration-continue/TDD/">TDD</a><small>1</small></li>
  
    <li><a href="/categories/kafkacat/kafka/big-data/">big data</a><small>1</small></li>
  
    <li><a href="/categories/kafkacat/kafka/big-data/cli/">cli</a><small>1</small></li>
  
    <li><a href="/categories/debug/jsp/variables/communication/">communication</a><small>1</small></li>
  
    <li><a href="/categories/logback/web/logs/debug/communication/">communication</a><small>2</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/parallele/multithread/testng/concurrence/">concurrence</a><small>1</small></li>
  
    <li><a href="/categories/debug/">debug</a><small>1</small></li>
  
    <li><a href="/categories/logback/web/logs/debug/">debug</a><small>2</small></li>
  
    <li><a href="/categories/docker/docker/swarm-mode/scaleway/terraform/devops/">devops</a><small>3</small></li>
  
    <li><a href="/categories/docker/docker/">docker</a><small>3</small></li>
  
    <li><a href="/categories/docker/">docker</a><small>3</small></li>
  
    <li><a href="/categories/git/">git</a><small>1</small></li>
  
    <li><a href="/categories/performance/mesure/metrique/spring/guice/">guice</a><small>1</small></li>
  
    <li><a href="/categories/git/productivite/hook/">hook</a><small>1</small></li>
  
    <li><a href="/categories/git/productivite/hook/push/integration-continue/">intégration continue</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/">java</a><small>1</small></li>
  
    <li><a href="/categories/debug/jsp/variables/communication/JSON/web/java/">java</a><small>1</small></li>
  
    <li><a href="/categories/junit/java/">java</a><small>1</small></li>
  
    <li><a href="/categories/performance/mesure/metrique/JDBC/logback/jersey/">jersey</a><small>1</small></li>
  
    <li><a href="/categories/debug/jsp/">jsp</a><small>1</small></li>
  
    <li><a href="/categories/junit/">junit</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/">junit</a><small>1</small></li>
  
    <li><a href="/categories/kafkacat/kafka/">kafka</a><small>1</small></li>
  
    <li><a href="/categories/kafkacat/">kafkacat</a><small>1</small></li>
  
    <li><a href="/categories/logback/">logback</a><small>2</small></li>
  
    <li><a href="/categories/performance/mesure/metrique/JDBC/logback/">logback</a><small>1</small></li>
  
    <li><a href="/categories/logback/web/logs/">logs</a><small>2</small></li>
  
    <li><a href="/categories/performance/mesure/">mesure</a><small>4</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/parallele/multithread/">multithread</a><small>1</small></li>
  
    <li><a href="/categories/performance/mesure/metrique/">métrique</a><small>4</small></li>
  
    <li><a href="/categories/junit/java/tdd/organisation/">organisation</a><small>1</small></li>
  
    <li><a href="/categories/kafkacat/kafka/big-data/cli/outil/">outil</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/parallele/">parallèle</a><small>1</small></li>
  
    <li><a href="/categories/performance/">performance</a><small>4</small></li>
  
    <li><a href="/categories/git/productivite/">productivité</a><small>1</small></li>
  
    <li><a href="/categories/git/productivite/hook/push/">push</a><small>1</small></li>
  
    <li><a href="/categories/docker/docker/swarm-mode/scaleway/">scaleway</a><small>3</small></li>
  
    <li><a href="/categories/performance/mesure/metrique/spring/">spring</a><small>1</small></li>
  
    <li><a href="/categories/docker/docker/swarm-mode/">swarm mode</a><small>3</small></li>
  
    <li><a href="/categories/debug/jsp/variables/communication/JSON/web/java/tag/">tag</a><small>1</small></li>
  
    <li><a href="/categories/junit/java/tdd/">tdd</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/">tdd</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/">tempus-fugit</a><small>1</small></li>
  
    <li><a href="/categories/docker/docker/swarm-mode/scaleway/terraform/">terraform</a><small>3</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/">test</a><small>1</small></li>
  
    <li><a href="/categories/junit/java/tdd/organisation/test/">test</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/parallele/multithread/testng/">testng</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/parallele/multithread/testng/concurrence/thread-safe/testrule/">testrule</a><small>1</small></li>
  
    <li><a href="/categories/git/productivite/hook/push/integration-continue/TDD/tests/">tests</a><small>1</small></li>
  
    <li><a href="/categories/tempus-fugit/junit/java/tdd/test/parallele/multithread/testng/concurrence/thread-safe/">thread-safe</a><small>1</small></li>
  
    <li><a href="/categories/docker/docker/swarm-mode/scaleway/terraform/devops/ubuntu/">ubuntu</a><small>3</small></li>
  
    <li><a href="/categories/debug/jsp/variables/">variables</a><small>1</small></li>
  
    <li><a href="/categories/debug/jsp/variables/communication/JSON/web/">web</a><small>1</small></li>
  
    <li><a href="/categories/logback/web/">web</a><small>2</small></li>
  
  </ul>
</div>


  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 Charles Lescot
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
